\documentclass[12pt]{article}



\usepackage{t1enc}
\usepackage[utf8]{inputenc}
\usepackage[magyar]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{enumerate}
\usepackage{mathtools}
\usepackage[shortlabels]{enumitem}
\usepackage[autostyle]{csquotes}
\usepackage{graphicx}
\usepackage{mathrsfs}



\selectlanguage{magyar}

\DeclareQuoteAlias{dutch}{magyar}

\theoremstyle{definition}
\newtheorem{definition}{Definíció}
\newtheorem*{definition*}{Definíció}

\theoremstyle{remark}
\newtheorem{remark}{Megjegyzés}
\newtheorem*{remark*}{Megjegyzés}

\theoremstyle{plain}
\newtheorem{theorem}{Tétel}
\newtheorem*{theorem*}{Tétel}

\theoremstyle{plain}
\newtheorem{lemma}{Lemma}
\newtheorem*{lemma*}{Lemma}

\let\oldemptyset\emptyset
\let\emptyset\varnothing

\newcommand{\forwardhat}{\overset{\rightharpoonup}}
\newcommand{\backwardhat}{\overset{\leftharpoonup}}

\newcommand{\inc}{\textit{inc}}
\newcommand{\dec}{\textit{dec}}

\newcommand{\rs}{\textit{reaction system}}
\newcommand{\ip}{\textit{interactive process}}

\newcommand{\en}{\textit{en}}
\newcommand{\res}{\textit{res}}
\newcommand{\excl}{\; \textit{excl} \;}
\newcommand{\incl}{\; \textit{incl} \;}

\newcommand{\reaction}[3]{
    (#1, \, #2, \, #3)
}

\graphicspath{ {./images/} }



\title{Reverzibilis Reaction System}
\date{\today}

\begin{document}
    \maketitle

    \section*{Előzetes ismeretek}

    \begin{definition*}
        Legyen $\mathscr{A} = (S, A)$ egy \textit{reaction system}. Egy $\mathscr{A}$-beli \textit{interactive process} véges sorozatok olyan $\pi = (\gamma, \delta)$ párja, amelyben $\gamma = C_{0}, C_{1}, \ldots C_{n}$, $\delta = D_{1}, \ldots D_{n}$, $n \geq 1$, ahol $C_{0}, \ldots C_{n}$, $D_{1}, \ldots D_{n} \subseteq S$, $D_{1} = \textit{res}_{\mathscr{A}}(C_{0})$ és $D_{i} = \textit{res}_{\mathscr{A}}(D_{i - 1} \cup C_{i - 1})$, ha $2 \leq i \leq n$.
    \end{definition*}

    \begin{definition*}
        Legyen $a = \reaction{R_{a}}{I_{a}}{P_{a}}$ egy reakció, $T$ pedig egy véges halmaz. Azt mondjuk, hogy $a$ alkalmazható $T$-re, ha $R_{a} \subseteq T$ és $I_{a} \cap T = \emptyset$. Erre a továbbiakban az $\en_{a}(T)$ jelölést használjuk. Az $a$ reakció által a $T$ halmazból képzett eredményhalmazt $\res_{a}(T)$ módon jelöljük, és a következőképpen definiáljuk: $\res_{a}(T) = P_{a}$, ha $\en_{a}(T)$, egyébként pedig $\res_{a}(T) = \emptyset$.
    \end{definition*}

    \begin{definition*}
        Legyen $A$ reakciók egy véges halmaza és $T$ egy véges halmaz. Ekkor az $A$ reakcióhalmaz $T$-re való alkalmazásának eredménye $\res_{A}(T) = \bigcup_{a \,\in\, A}\res_{a}(T)$.
    \end{definition*}

    \begin{definition*}
        Legyen $A$ reakciók egy véges halmaza és $T$ egy véges halmaz. $A$ azon részhalmazát, mely csak olyan reakciókat tartalmaz, melyek alkalmazhatók $T$-re, $\en_{A}(T)$ módon jelöljük.
    \end{definition*}
    
    \begin{remark*}
        A következőkben, az egyszerűbb olvashatóság érdekében, feltesszük, hogy ha adott egy $a \in A$ reakció, akkor annak komponenseit $a$ alsó indexbe helyezésével helyezésével jelöljük, az $a = \reaction{R_{a}}{I_{a}}{P_{a}} \in A$ kifejezés kiírása nélkül.
    \end{remark*}

    \section*{Reverzibilis Reaction System}

    \begin{remark*}
        A továbbiakban, az általánosság elvesztése nélkül, kizárólag olyan $\mathscr{A} = (S, A)$ \textit{reaction systemeket} fogunk tekinteni, melyek nem tartalmaznak azonos feltételek mellett alkalmazható reakciókat. Ez azt jelenti, hogy nincs két olyan $a, b\in A$ ($a \neq b$) reakció, melyekre teljesülne, hogy $R_{a} = R_{b}$ és $I_{a} = I_{b}$. Az ilyen $a, b$ reakciókat ugyanis egyszerűen összevonhatjuk egy $c$ reakcióvá, ahol $c = (R_{a}, I_{a}, P_{a} \cup P_{b})$.
    \end{remark*}

    \begin{definition*}
        Legyen $\mathscr{A} = (S, A)$ egy \textit{reaction system}, $\pi=(\gamma, \delta)$ pedig egy \textit{interactive process} $\mathscr{A}$-ban a $\gamma = C_{0}, C_{1}, \ldots C_{n}$, bemeneti halmazokkal és $\textit{sts}(\pi)=W_{0},W_{1},\ldots W_{n}$ állapothalmazokkal. $\pi$ reverzibilis, amennyiben minden $W_{i}$ ($1 \leq i \leq n$) állapotára teljesül, hogy ha $W \subseteq S$ olyan, hogy $res_{\mathscr{A}}(W) \cup C_{i} = W_{i}$, akkor $W = W_{i - 1}$.
    \end{definition*}

    \begin{lemma*}
        Legyen $\mathscr{A} = (S, A)$ egy \textit{reaction system}, $\pi$ pedig egy \textit{interactive process} $\mathscr{A}$-ban az $\textit{sts}(\pi)=W_{0},W_{1},\ldots W_{n}$ állapothalmazokkal. $\pi$ csak akkor lehet reverzibilis, ha az állapothalmazainak minden eleme részt vesz valamilyen reakcióban, azaz $\bigcup_{a \in \textit{en}(W_{i})} R_{a} = W_{i}$, $i \leq n$.
    \end{lemma*}

    \begin{proof}
        Legyen $\mathscr{A} = (S, A)$ egy \textit{reaction system} és $\pi=(\gamma, \delta)$ egy \textit{interactive process} $\mathscr{A}$-ban a $\gamma = C_{0}, C_{1}, \ldots C_{n}$, bemeneti halmazokkal és az $\textit{sts}(\pi)=W_{0},W_{1},\ldots W_{n}$ állapothalmazokkal. Legyen $W_{i - 1} \subseteq S$ és $W_{i} \subseteq S$ $\pi$ két egymást követő állapothalmaza, azaz $\res_{A}(W_{i-1}) \cup C_{i}=W_{i}$.
        
        Tegyük fel, hogy van olyan elem a $W_{i-1}$ halmazban, mely nem vesz részt egy reakcióban sem:
        \begin{align*}
            \bigcup_{a \,\in\, \textit{en}(W_{i-i})} R_{a} \subset W_{i-1}.
        \end{align*}
        Ez pontosan azt jelenti, hogy létezik egy olyan $W \subset S$ halmaz, mely
        \begin{align*}
            W = \bigcup_{a \,\in\, \textit{en}(W_{i-i})} R_{a}
        \end{align*}
        módon adott, és melyre teljesül, hogy
        \begin{align*}
            \res_{A}(W) \cup C_{i} = W_{i}.
        \end{align*}

        Ekkor $\pi$ biztosan nem lehet reverzibilis, hiszen $W \neq W_{i - 1}$, viszont $W_{i} = \res_{A}(W) \cup C_{i} = \res_{A}(W_{i - 1}) \cup C_{i}$.
    \end{proof}

    \begin{definition*}
        Egy $\mathscr{A}$ \textit{reaction system} reverzibilis, amennyiben minden $\mathscr{A}$-beli $\pi$ \textit{interactive process} reverzibilis.
    \end{definition*}

    \begin{lemma*}
        Legyen $\mathscr{A} = (S, A)$ egy \textit{reaction system}. $\mathscr{A}$ csak akkor lehet reverzibilis, ha minden $\pi = (\gamma, \delta)$ $\mathscr{A}$-beli \textit{interactive process} olyan, hogy $\pi$ $\gamma = C_{0}, C_{1}, \ldots, C_{n}$ bemeneti halmazainak elemei nem állíthatók elő semmilyen reakcióval, azaz $\forall i$ $:$ $\bigcup_{a \in A} P_{a} \cap C_{i} = \emptyset$.
    \end{lemma*}

    \begin{proof}
        A következőkben megmutatjuk, hogy ha egy $\mathscr{A}$ \textit{reaction system} nem teljesíti a fenti lemmát (azaz reakciói tetszőlegesek), akkor biztosan nem lehet reverzibilis.

        Legyen $\mathscr{A} = (S, A)$ egy \textit{reaction system}, $\pi = (\gamma, \delta)$ pedig egy \textit{interactive process} $\mathscr{A}$-ban, ahol $\gamma = C_{0}, C_{1}, \ldots, C_{n}$, $\delta = D_{1}, D_{2},\ldots,D_{n}$ és $\textit{sts}(\pi)=W_{0},W_{1},\ldots W_{n}$.

        Vegyük $sts(\pi)$ egy tetszőleges $W_{i - 1}$ állapothalmazát ($i \leq n$), valamint válasszuk meg a $C_{i}$ bemeneti halmazt oly módon, hogy
        \begin{align*}
            C_{i} = \res_{A}(W_{i - 1}).
        \end{align*}
        Ezt megtehetjük, hiszen nincs a bemeneti halmazok elemeire vonatkozó megszorítás.

        Tudjuk, hogy
        \begin{align*}
            W_{i} = C_{i} \cup D_{i} = C_{i} \cup \res_{A}(W_{i - 1}),
        \end{align*}
        azaz
        \begin{align*}
            W_{i} = C_{i}.
        \end{align*}

        Ez azonban azt jelenti, hogy tetszőleges $W \subseteq S$ halmazra, ha
        \begin{align*}
            \res_{A}(W) \subseteq C_{i},
        \end{align*}
        akkor
        \begin{align*}
            \res_{A}(W) \cup C_{i} = W_{i}.
        \end{align*}

        Ilyen tulajdonságú halmazból mindig létezik legalább kettő: $W_{i-1}$ és az üres halmaz. Ha viszont már két ilyen halmaz létezik, akkor $\pi$ nem reverzibilis, amiből következik, hogy $\mathscr{A}$ sem reverzibilis.
    \end{proof}

    \begin{theorem*}
        Az $\mathscr{A} = (S, A)$ \textit{reaction system} reverzibilis, amennyiben a következő feltételek mindegyikének eleget tesz:
        \begin{enumerate}[label={(\arabic*)}]
            \item
            Az $A$ reakcióhalmaz elemei olyanok, hogy bármely $\pi$ \textit{interactive process} teljesíti az elemek eltűnésére vonatkozó lemmát.

            \item
            Az $S$ halmaz két diszjunkt részhalmazból tevődik össze:
            \begin{align*}
                S = S_{c} \cup S_{d} \qquad S_{c} \cap S_{d} = \emptyset,
            \end{align*}
            mely halmazokra teljesül, hogy $S_{c} \cap \bigcup_{a \in A} P_{a} = \emptyset$ és $S_{d} \cap \bigcup_{0 \leq i \leq n} C_{i} = \emptyset$ bármely $\mathscr{A}$-beli $\pi$ \textit{interactive processre} (azaz $\mathscr{A}$ teljesíti a bemeneti halmazokra vonatkozó lemmát).

            \item
            Egyértelmű, hogy egy állapot mely reakciók alkalmazásával állt elő: Ha vesszük a reakciók $A$ halmazának összes olyan különböző $A_i$ részhalmazát, hogy
            \begin{align*}
                \exists \, T \subseteq S : \en_{A_{i}}(T) = A_{i} \qquad \forall i
            \end{align*}
            akkor
            \begin{align*}
                \bigcup\limits_{a \,\in\, A_{i}} P_{a} \neq \bigcup\limits_{b \,\in\, A_{j}} P_{b} \qquad i \neq j.
            \end{align*}
        \end{enumerate}
    \end{theorem*}

    \begin{proof}
        Indirekt módon tegyük fel, hogy adott egy olyan $\mathscr{A}=(S, A)$ ($S = S_{c} \cup S_{d}$) \textit{reaction system}, mely teljesíti a fenti tételt, azonban nem reverzibilis. Ekkor létezik olyan $\pi$ \textit{interactive process} $\mathscr{A}$-ban, mely nem reverzibilis. Ez azt jelenti, hogy a folyamat tartalmaz olyan $W \subseteq S$ állapotot, melyhez léteznek olyan $W_{i} \subseteq S$ és $W_{j} \subseteq S$ ($W_{i} \neq W_{j}$) halmazok, hogy
        \begin{align*}
            \res_{A}(W_{i}) \cup C &= W \\
            \res_{A}(W_{j}) \cup C &= W,
        \end{align*}
        ahol $C \subseteq S_{c}$ a $W$ állapothoz tartozó bemeneti halmaz. 
        
        Mivel mind $\res_{A}(W_{i}) \subseteq S_{d}$, mind $\res_{A}(W_{j}) \subseteq S_{d}$, ezért
        \begin{align*}
            \res_{A}(W_{i}) &= W \setminus C \\
            \res_{A}(W_{j}) &= W \setminus C, \\
        \end{align*}
        azaz
        \begin{align*}
            \res_{A}(W_{i}) = \res_{A}(W_{j}).
        \end{align*}

        Ez azt jelenti, hogy
        \begin{align*}
            \bigcup\limits_{a \,\in\, \en_{A}(W_{i})}P_{a} = \bigcup\limits_{b \,\in\, \en_{A}(W_{b})}P_{b}.
        \end{align*}

        $\mathscr{A}$ teljesíti a fenti tételt,  ezért ilyen esetben
        \begin{align*}
            \en_{A}(W_{i}) = \en_{A}(W_{j}).
        \end{align*}

        Egy számítási lépésben egy adott állapothalmaz minden elemének részt kell vennie legalább egy reakcióban, azaz
        \begin{align*}
            \bigcup\limits_{a \,\in\, \en_{A}(W_{i})} R_{a} = W_{i}
        \end{align*}
        és
        \begin{align*}
            \bigcup\limits_{b \,\in\, \en_{A}(W_{j})} R_{b} = W_{j}.
        \end{align*}

        A bizonyítás elején feltettük, hogy $W_{i} \neq W_{j}$, amiből következően
        \begin{align*}
            \bigcup\limits_{a \,\in\, \en_{A}(W_{i})} R_{a} \neq \bigcup\limits_{b \,\in\, \en_{A}(W_{j})} R_{b}.
        \end{align*}

        Tudjuk, hogy $\en_{A}(W_{i}) = \en_{A}(W_{j})$, mely halmazt jelöljük $E$-vel. Ezt a megelőző kifejezésbe beírva kapjuk, hogy
        \begin{align*}
            \bigcup\limits_{a \,\in\, E} R_{a} \neq \bigcup\limits_{b \,\in\, E} R_{b}.
        \end{align*}
        
        Ez azonban ellentmondás, azaz $\mathscr{A}$ reverzibilis lesz.
    \end{proof}

    \subsection*{Példák}

    \subsubsection*{Reverzibilis bináris számláló}

    Reverzibilis \textit{reaction system} felhasználásával megvalósítható egy olyan ciklikus bináris számláló, melynek értéke az előrefelé számítás során növekszik, míg a hátrafelé számítás során csökken. A ciklikusság azt jelenti, hogy a legnagyobb ábrázolható érték további növelése a $0$ értéket, míg a $0$ érték további csökkentése a legnagyobb ábrázolható értéket eredményezi.

    Először is tegyük fel, hogy adott egy $n > 0$ egész. $n$ jelenti a számláló bithosszát. Ekkor a \textit{reaction system} alaphalmaza a következő lesz:
    \begin{align*}
        S_{n} = \{ p_{0}, p_{1}, \ldots, p_{n - 1}\} \cup \{ \textit{inc}, z \}.
    \end{align*}
    A fenti halmaz $p_{i}$ elemei reprezentálják az egyes bitek beállított (azaz $1$ értékű) állapotát, míg az $\textit{inc}$ elemmel a számláló értékének növelését válthatjuk ki. A $z$ elem jelenti a számláló $0$ értékét.

    A számábrázolás tehát a következőképpen alakul. Tegyük fel, hogy a \textit{reaction system} egy $M \subseteq S$ állapotban van. Ekkor, ha $p_{i} \in M$, akkor az $i$-edik pozíción levő bit $1$ értékkel, amennyiben pedig $p_{i} \notin M$, akkor $0$ értékkel rendelkezik. Például, ha $n = 4$ és $M = \{p_{2}, p_{0}\}$, akkor a \textit{reaction system} állapota a $0101$ bináris számot írja le.
    
    Előrefelé számítás során az $\textit{inc}$ elemet használhatjuk a számláló értékének eggyel történő növelésére. Egyszerű példát tekintve, ez azt jelenti, hogy amennyiben a \textit{reaction system} egy $\{p_{1}, p_{0}, \textit{inc}\}$ állapotban van, akkor valamely reakciók végrehajtása után a $\{ p_{2} \}$ állapotba kell kerülnie.

    Folytassuk tehát az említett működéshez szükséges reakciók megadásával! Legyen $n > 0$ adott, ekkor a reakciók $A_{n}$ halmaza a következő elemekből áll:
    \begin{align*}
        a_{0} &= \reaction{\{ \inc, z \}}{O_{2^{n}-1}}{O_{1}} \\
        a_{i} &= \reaction{\{ \inc \} \cup O_{i}}{Z_{i}}{O_{i + 1}}, \qquad 1 \leq i < 2^{n} - 2, \\
        a_{2^{n}-1} &= \reaction{\{ \inc \} \cup O_{2^{n} - 1}}{\{z\}}{\{z\}}
    \end{align*}
    ahol
    \begin{align*}
        O_{i} &= \{ \; p_{j} \; : \; \text{a $j$-edik bit értéke $1$ $i$ bináris felbontásában} \; \}, \\
        Z_{i} &= S \setminus\{ \inc \} \setminus O_{i}.
    \end{align*}
    Az egyes reakciók megfelelnek a számláló értékének $i$-ről $i + 1$-re történő növelésének (kivétel az utolsó reakció, mely a számláló átfordulását eredményezi).

    Az $n$-bites számlálónak megfelelő \textit{reaction system} ekkor $\mathcal{B}_{n}=(S_{n}, A_{n})$.

    Tekintsünk most egy példát! Tegyük fel, hogy egy kétbites számlálót szeretnénk készíteni, azaz $n = 2$. Az $S_{2}$ alaphalmaz ekkor a $\{p_{1}, p_{0}, \inc, z \}$ elemekből áll, a reakciók $A_{2}$ halmazát pedig az
    \begin{align*}
        a_{0} &= \reaction{\{ \inc, z \}}{\{p_{0}, p_{1}\}}{\{ p_{0} \}}, \\
        a_{1} &= \reaction{\{ \inc, p_{0} \}}{\{ z, p_{1} \}}{\{ p_{1} \}}, \\
        a_{2} &= \reaction{\{ \inc, p_{1} \}}{\{ z, p_{0} \}}{\{ p_{1}, p_{0} \}}, \\
        a_{3} &= \reaction{\{ \inc, p_{0}, p_{1} \}}{\{z\}}{\{z\}}
    \end{align*}
    elemek alkotják.

    Ha az egymást követő kontextushalmazok sorra az \inc növelő elemből állnak, akkor a $\mathcal{B}_{2} = (S_{2}, A_{2})$ \textit{reaction system} a következő állapotokat fogja kiszámolni:
    \begin{align*}
        \{z\} \rightarrow \{p_{0}\} \rightarrow \{p_{1}\} \rightarrow \{p_{1}, p_{0}\} \rightarrow \{z\} \rightarrow \cdots
    \end{align*}
\end{document}
